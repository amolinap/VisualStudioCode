## Visual Studio Code

### dotnet ef database

<center>
	<img src="../Images/Swagger_01.png" width="500">
</center>

### Migraciones

https://medium.com/@rvazquezmiguel/migraciones-con-entity-framework-core-3ae6379b1ca8

#### dotnet ef migrations

El comando dotnet ef migrations add de Entity Framework Core (EF Core) agrega una nueva migración a un proyecto: 

1. Compara el contexto actual con la última migración creada 
2. Detecta los cambios en el modelo 
3. Genera archivos de migración a partir de los cambios detectados 

Las migraciones son una herramienta que permite actualizar el esquema de la base de datos de forma incremental para que esté sincronizado con el modelo de datos de la aplicación. Esto es útil cuando se implementan nuevas funciones, como la adición o eliminación de entidades o propiedades. 

#### dotnet ef database update

Actualiza la base de datos a la última migración o a una específica

#### dotnet ef database drop

Elimina la base de datos

#### dotnet ef migrations remove

El comando **dotnet ef migrations remove** sirve para eliminar una migración y garantizar que la instantánea se restablezca correctamente. 

Las migraciones en EF Core permiten actualizar de forma incremental el esquema de la base de datos para que se mantenga sincronizado con el modelo de datos de la aplicación. 

Para eliminar archivos de migración, el comando **dotnet ef migrations remove** verifica la base de datos y elimina los archivos de migración más recientes que no se hayan aplicado a la base de datos

### SQL : Error when adding column generated from other columns (postgresql 11)

https://stackoverflow.com/questions/54722465/sql-error-when-adding-column-generated-from-other-columns-postgresql-11

https://get.enterprisedb.com/postgresql/postgresql-12.20-2-windows-x64.exe

```
dotnet ef database update

Failed executing DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "Productos" (
    "Id_Pro" integer GENERATED BY DEFAULT AS IDENTITY,
    "NumControl" text NOT NULL,
    "NumSerie" text NOT NULL,
    "Status" integer NOT NULL,
    CONSTRAINT "PK_Productos" PRIMARY KEY ("Id_Pro")
);
```

I had this error also because I was thinking to run PostgreSQL 14 but then I run the command:

```
select version();
 -> PostgreSQL 11.7, compiled by Visual C++ build 1914, 64-bit
```

The command GENERATED ALWAYS AS is available since PostgreSQL 12 (as far as I can see from the documentation here: https://www.postgresql.org/docs/12/ddl-generated-columns.html).